<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<title>Visual Event javascript booklet</title>
		
		<style type="text/css" media="screen">
			body {
				font: 80%/1.45em Arial, Verdana, Helvetica, sans-serif;
				margin: 0;
				padding: 0;
			}
			
			#wrapper {
				width: 800px;
				margin: 0 auto;
			}
			
			textarea {
				width: 100%;
				height: 300px
			}
		</style>
		
		<script type="text/javascript" charset="utf-8" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
		<script type="text/javascript" charset="utf-8">
			$(document).ready( function () {
				$('input').keyup( makeBookmarklet );
				makeBookmarklet();
			} );
			
			function makeBookmarklet () {
				var s = "(function() {\
				var LibSrc = '{LibSrc}',\
						LibDesc = '{LibDesc}',\
						LibObj = '{LibObj}',\
						url = '{IJsSrc}';\
				if( typeof window[LibObj] !='undefined' ) {\
					window[LibObj].toggle();\
				} else {\
					var n=document.createElement('script');\
					n.setAttribute('language','JavaScript');\
					n.setAttribute('id','InjectJsLib');\
					n.setAttribute('data-ijslib_obj', LibObj);\
					n.setAttribute('data-ijslib_desc', LibDesc);\
					n.setAttribute('data-ijslib_src', LibSrc);\
					n.setAttribute('src',url+'?rand='+new Date().getTime());\
					document.body.appendChild(n);\
				}})();";

				s = s.replace('{LibObj}', document.getElementById('f_obj').value).
				 replace('{LibDesc}', document.getElementById('f_desc').value).
				 replace('{LibSrc}', document.getElementById('f_src').value).
				 replace('{IJsSrc}', document.getElementById('f_ijssrc').value);
				// s = s.replace(' ', '%20');

				document.getElementById('bookmarklet').href = "javascript:"+s;
			}
		</script>
	</head>
	<body>
		<div id="wrapper">
			<h1>Visual Event bookmarklet generator</h1>
			<p>
				Visual Event is a bookmarklet which will visually show you which elements on an HTML 
				page have Javascript events assigned to them. This page can be used to generate the
				bookmarklet that you want to use for testing or deployment of Visual Event.
			</p>
			<p>
				Object name: <input type="text" id="f_obj" value="BootstrapVisualEvent"><br/>
				Short description: <input type="text" id="f_desc" value="BootstrapVisualEvent example"><br/>
				Lib src: <input type="text" id="f_src" value="examples/BootstrapVisualEvent.js"><br/>
				Loader src: <input type="text" id="f_ijssrc" value="VisualEvent_Loader.js">
			</p>
			<p>
				To generate a bookmarklet, modify the Javascript in the textarea below, the 
				bookmarklet link will be updated as you type (typically you will only need to
				change the URL to load Visual Event) and then click and drag the
				<i>Visual Event</i> link to your bookmarklet bar.
			</p>
			
			<p style="text-align:center">
				<a id="bookmarklet" href="">Visual Event</a>
			</p>
		</div>
	</body>
</html>



